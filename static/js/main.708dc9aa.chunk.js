(this.webpackJsonpgalley=this.webpackJsonpgalley||[]).push([[0],{142:function(e,t,a){e.exports=a.p+"static/media/\u041a\u043e\u043b\u044f\u043d.9cc251b1.png"},147:function(e,t,a){e.exports=a(305)},152:function(e,t,a){},174:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},214:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},304:function(e,t,a){},305:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(6),s=a.n(r),o=(a(152),a(153),a(13)),u=a(34),i=a(37),l=a(310),m="NAVBAR.SET_TITLE",f=function e(){Object(i.a)(this,e)};f.setTitle=Object(l.a)(m);var p=a(24),b=a(7),d=a(308),E=Object(p.a)({},m,(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{title:t.payload})})),h={reducer:Object(d.a)(E,{title:""}),actions:f},O=a(25),v=a.n(O),j=a(38),k="/rating",T="/tasks",g="/users_list",S={BASE:"https://galley-jr6l7s7e6a-uc.a.run.app",BOARD:"/board",TASK_CHANGE:"/task/change",USERS:"/users",CLICKS:"/clicks/:count",TASK_CREATE:"/task/create"},A="LOADING",C="READY",N=["\u0413\u043e\u0442\u043e\u0432\u0430 \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438","\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435","\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"],y=a(124),w=a.n(y).a.create({headers:{"Content-Type":"application/json"},baseURL:S.BASE}),x=function e(){Object(i.a)(this,e)};x.getBoard=function(){return w.get(S.BOARD)},x.changeTask=function(e){return w.post(S.TASK_CHANGE,e)},x.getUsers=function(){return w.get(S.USERS)},x.getClicks=function(e){var t=S.CLICKS.replace(":count",e.toString());return w.get(t)},x.createTask=function(e){return w.post(S.TASK_CREATE,e)};var I="BOARD.SET_STATUS",R="BOARD.CHANGE_TASK_STATUS",D="BOARD.SET_TASKS",_="BOARD.SET_SIGNAL_FETCH",B=function e(){Object(i.a)(this,e)};B.setStatus=Object(l.a)(I),B.changeStatusTask=Object(l.a)(R),B.setTasks=Object(l.a)(D),B.setSignalFetch=Object(l.a)(_),B.fetchTasks=function(e){return function(){var t=Object(j.a)(v.a.mark((function t(a){var n,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e&&a(B.setStatus(A)),t.prev=1,t.next=4,x.getBoard();case 4:n=t.sent,a(B.setTasks(n.data)),c=setTimeout((function(){a(B.setSignalFetch(!0)),clearTimeout(c)}),5e3),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()};var F,K,L=a(74),G={tasks:[],loadStatus:C,signal:!1},H=(F={},Object(p.a)(F,D,(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{tasks:Object(L.a)(t.payload)})})),Object(p.a)(F,I,(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{loadStatus:t.payload})})),Object(p.a)(F,_,(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{signal:t.payload})})),Object(p.a)(F,R,(function(e,t){return Object(b.a)({},e)})),F),U={reducer:Object(d.a)(H,G),actions:B},W="CHART.SET_DATA",J="CHART.SET_SIGNAL",M=function e(){Object(i.a)(this,e)};M.setData=Object(l.a)(W),M.setSignal=Object(l.a)(J),M.fetchChartData=function(e){return function(){var t=Object(j.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.getClicks(e);case 3:n=t.sent,a(M.setData(n.data)),setTimeout((function(){a(M.setSignal(!0))}),2e3),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()};var P=(K={},Object(p.a)(K,W,(function(e,t){var a=function(e){var t=Object(L.a)(new Set(e.map((function(e){return e.hash})))),a=[];t.map((function(t){var n=e.filter((function(e){return e.hash===t}));a.push(n)}));var n=[];return a.map((function(e){var t={label:e[0].hash,data:[]};e.reverse().map((function(e,a){t.data.push([a,e.count])})),n.push(t)})),n}(t.payload);return Object(b.a)(Object(b.a)({},e),{},{data:a.reverse()})})),Object(p.a)(K,J,(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{signal:t.payload})})),K),z=Object(d.a)(P,{data:[],signal:!1}),V={actions:M,reducer:z},Y=Object(u.combineReducers)({navbar:h.reducer,board:U.reducer,chart:V.reducer}),$=a(125),q=Object($.composeWithDevTools)(Object(u.applyMiddleware)((function(e){var t=e.dispatch,a=e.getState;return function(e){return function(n){return n instanceof Function?n(t,a):e(n)}}}))),Q=Object(u.createStore)(Y,q),X=a(90),Z=a(8),ee=(a(174),a(126)),te=(a(176),a(40)),ae=(a(177),a(52)),ne=a(94),ce=a(313),re=(a(178),a(1)),se=a.n(re),oe=a(312),ue=(a(179),function(e){var t=e.task,a=Object(o.b)(),n=se()({task:!0}),r=function(){var e=Object(j.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.changeTask(Object(b.a)(Object(b.a)({},t),{},{status:n}));case 3:a(B.fetchTasks()),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:n},c.a.createElement("h3",{className:"task-title"},"\u0422\u0435\u043c\u0430: ",t.title),c.a.createElement("p",{className:"task-description"},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: ",t.description),c.a.createElement("div",{className:"controls"},c.a.createElement(ne.a,{onClick:function(){r(t.status+1)},type:"dashed"},function(){switch(t.status){case 0:return"\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0443";case 1:return"\u0412 \u0442\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435";case 2:return"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"}}()),c.a.createElement(ne.a,{danger:!0,type:"dashed",icon:c.a.createElement(oe.a,null),onClick:function(){r(4)}})))}),ie=function(e){var t=e.statusId,a=e.tasks,n=e.onCreateTask,r=N[t],s=a.filter((function(e){return e.status===t}));return c.a.createElement("div",{className:"tasks-list"},c.a.createElement("h3",{className:"tasks-list-title"},r),c.a.createElement("div",{className:"tasks"},c.a.createElement("div",{className:"controls"},c.a.createElement(ne.a,{size:"small",icon:c.a.createElement(ce.a,null),onClick:function(){n&&n(t)}})),s&&s.length?c.a.createElement(c.a.Fragment,null,s.map((function(e,t){return c.a.createElement(ue,{key:t,task:e})}))):c.a.createElement(ae.a,{description:'\u041d\u0435\u0442 \u0437\u0430\u0434\u0430\u0447 \u0432 \u0441\u0442\u0430\u0442\u0443\u0441\u0435 "'.concat(r,'"')})))},le=a(306),me=a(309),fe=a(307),pe=(a(214),function(e){var t=Object(n.useState)(!1),a=Object(te.a)(t,2),r=a[0],s=a[1],o=e.status,u=e.onClose,i=le.a.useForm(),l=Object(te.a)(i,1)[0],m=function(){var e=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,x.createTask(t);case 4:u&&u(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.prev=10,s(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"backdrop",onClick:function(e){e.stopPropagation(),u&&u()}},c.a.createElement("div",{className:"form-task",onClick:function(e){return e.stopPropagation()}},c.a.createElement(le.a,{form:l,onFinish:function(e){var t=Object(b.a)(Object(b.a)({},e),{},{status:o});t.title.length&&m(t),l.resetFields()}},c.a.createElement(le.a.Item,{name:"title"},c.a.createElement(me.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})),c.a.createElement(le.a.Item,{name:"urgency"},c.a.createElement(fe.a,{placeholder:"\u0421\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c"},c.a.createElement(fe.a.Option,{value:0},"\u041d\u0435 \u0441\u0440\u043e\u0447\u043d\u043e"),c.a.createElement(fe.a.Option,{value:1},"\u0421\u0440\u043e\u0447\u043d\u043e"),c.a.createElement(fe.a.Option,{value:2},"\u041e\u0447\u0435\u043d\u044c \u0441\u0440\u043e\u0447\u043d\u043e"))),c.a.createElement(le.a.Item,{name:"description"},c.a.createElement(me.a.TextArea,{placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435..."})),c.a.createElement(le.a.Item,null,c.a.createElement(ne.a,{htmlType:"submit",loading:r},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))}),be=(a(300),a(301),a(142)),de=a.n(be),Ee=function(){var e=Object(n.useState)(!1),t=Object(te.a)(e,2),a=t[0],r=t[1],s=Object(o.b)();Object(n.useEffect)((function(){s(f.setTitle("404 \u041f\u0443\u0443\u0443\u0441\u0442\u043e\u043e\u043e..."));var e=setTimeout((function(){r(!0)}),100);return function(){clearTimeout(e)}}),[]);var u=se()({kolyan:!0,"kolyan-show":a});return c.a.createElement("div",{className:"not-found"},c.a.createElement("h1",null,"\u0422\u044b \u043a\u0443\u0434\u0430 \u0441\u0432\u043e\u0438\u043c \u043f\u0430\u043b\u044c\u0446\u0435\u043c \u0442\u044b\u0447\u0435\u0448\u044c?"),c.a.createElement("img",{className:u,src:de.a,alt:"kolyan"}))},he=[{path:T,name:"\u0414\u043e\u0441\u043a\u0430 \u0441 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430\u043c\u0438",component:function(){var e=Object(n.useState)(0),t=Object(te.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),u=Object(te.a)(s,2),i=u[0],l=u[1],m=Object(o.b)(),p=Object(o.c)((function(e){return e.board})),b=p.tasks,d=(p.loadStatus,p.signal);Object(n.useEffect)((function(){m(f.setTitle("\u0414\u043e\u0441\u043a\u0430 \u0441 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430\u043c\u0438")),m(B.fetchTasks(!0))}),[]),Object(n.useEffect)((function(){d&&(m(B.fetchTasks()),m(B.setSignalFetch(!1)))}),[d]);var E=function(e){r(e),l(!0)};return c.a.createElement("div",{className:"tasks"},!!b&&c.a.createElement("div",{className:"tasks-columns"},c.a.createElement(ie,{statusId:0,tasks:b,onCreateTask:E}),c.a.createElement(ie,{statusId:1,tasks:b,onCreateTask:E}),c.a.createElement(ie,{statusId:2,tasks:b,onCreateTask:E}),c.a.createElement(ie,{statusId:3,tasks:b,onCreateTask:E})),i&&c.a.createElement(pe,{status:a,onClose:function(){l(!1)}}))}},{path:g,name:"\u0413\u0440\u0435\u0431\u0446\u044b",component:function(){var e=Object(o.b)();return Object(n.useEffect)((function(){e(f.setTitle("\u0413\u0440\u0435\u0431\u0446\u044b"))}),[]),c.a.createElement("div",{className:"users"},"\xa0\u0413\u0440\u0435\u0431\u0446\u044b")}},{path:k,name:"\u0413\u0440\u0430\u0444\u0438\u043a \u0440\u0430\u0431\u043e\u0442\u044b \u0433\u0440\u0435\u0431\u0446\u043e\u0432",component:function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.chart})),a=t.data,r=t.signal;Object(n.useEffect)((function(){e(f.setTitle("\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c \u0433\u0440\u0435\u0431\u043b\u0438")),e(M.fetchChartData(100))}),[]),Object(n.useEffect)((function(){r&&(e(M.fetchChartData(100)),e(M.setSignal(!1)))}),[r]);return c.a.createElement("div",{className:"rating"},!!a.length&&c.a.createElement("div",{className:"chart-holder"},c.a.createElement(ee.Chart,{data:a,axes:[{primary:!0,type:"linear",position:"bottom"},{type:"linear",position:"left"}],tooltip:!0})))}}],Oe=(a(302),function(e){var t=e.route,a=e.active,n=Object(Z.g)(),r=se()({"side-menu-item":!0,"side-menu-item-active":a});return c.a.createElement("div",{className:r,onClick:function(){n.push(t.path)}},c.a.createElement("span",null,t.name))}),ve=function(e){var t=e.routes.filter((function(e){return!!e.name})),a=Object(Z.h)().pathname;return c.a.createElement("div",{className:"side-menu"},t.map((function(e,t){return c.a.createElement(Oe,{key:t,route:e,active:e.path===a})})))},je=(a(304),function(){var e=Object(o.c)((function(e){return e.navbar})).title;return c.a.createElement("div",{className:"navbar"},c.a.createElement("h1",null,e))}),ke=function(){return c.a.createElement(X.a,null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"container-side"},c.a.createElement(ve,{routes:he})),c.a.createElement("div",{className:"container-content"},c.a.createElement(je,null),c.a.createElement(Z.b,{path:"/"},c.a.createElement(Z.a,{to:T})),c.a.createElement(Z.d,null,he.map((function(e,t){return c.a.createElement(Z.b,{key:t,path:e.path,component:e.component})})),c.a.createElement(Ee,null)))))},Te=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(o.a,{store:Q},c.a.createElement(ke,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[147,1,2]]]);
//# sourceMappingURL=main.708dc9aa.chunk.js.map