(this.webpackJsonpgalley=this.webpackJsonpgalley||[]).push([[0],{142:function(e,t,a){e.exports=a.p+"static/media/4.cd3dee1f.png"},143:function(e,t,a){e.exports=a.p+"static/media/\u041a\u043e\u043b\u044f\u043d.9cc251b1.png"},148:function(e,t,a){e.exports=a(307)},153:function(e,t,a){},175:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},215:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(6),s=a.n(r),o=(a(153),a(154),a(11)),u=a(36),i=a(30),l=a(312),m="NAVBAR.SET_TITLE",f=function e(){Object(i.a)(this,e)};f.setTitle=Object(l.a)(m);var p=a(18),b=a(7),d=a(310),E=Object(p.a)({},m,(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{title:t.payload})})),h={reducer:Object(d.a)(E,{title:""}),actions:f},v=a(16),O=a.n(v),j=a(31),k="/rating",g="/tasks",T="/users_list",S={BASE:"https://galley-jr6l7s7e6a-uc.a.run.app",BOARD:"/board",TASK_CHANGE:"/task/change",USERS:"/users",CLICKS:"/clicks/:count",TASK_CREATE:"/task/create"},N="LOADING",y="READY",A=["\u0413\u043e\u0442\u043e\u0432\u0430 \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438","\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435","\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"],C=a(124),w=a.n(C).a.create({headers:{"Content-Type":"application/json"},baseURL:S.BASE}),x=function e(){Object(i.a)(this,e)};x.getBoard=function(){return w.get(S.BOARD)},x.changeTask=function(e){return w.post(S.TASK_CHANGE,e)},x.getUsers=function(){return w.get(S.USERS)},x.getClicks=function(e){var t=S.CLICKS.replace(":count",e.toString());return w.get(t)},x.createTask=function(e){return w.post(S.TASK_CREATE,e)};var R="BOARD.SET_STATUS",_="BOARD.CHANGE_TASK_STATUS",I="BOARD.SET_TASKS",D="BOARD.SET_SIGNAL_FETCH",B=function e(){Object(i.a)(this,e)};B.setStatus=Object(l.a)(R),B.changeStatusTask=Object(l.a)(_),B.setTasks=Object(l.a)(I),B.setSignalFetch=Object(l.a)(D),B.fetchTasks=function(e){return function(){var t=Object(j.a)(O.a.mark((function t(a){var n,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e&&a(B.setStatus(N)),t.prev=1,t.next=4,x.getBoard();case 4:n=t.sent,a(B.setTasks(n.data)),c=setTimeout((function(){a(B.setSignalFetch(!0)),clearTimeout(c)}),5e3),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()};var U,F,K=a(51),L={tasks:[],loadStatus:y,signal:!1},G=(U={},Object(p.a)(U,I,(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{tasks:Object(K.a)(t.payload)})})),Object(p.a)(U,R,(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{loadStatus:t.payload})})),Object(p.a)(U,D,(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{signal:t.payload})})),Object(p.a)(U,_,(function(e,t){return Object(b.a)({},e)})),U),H={reducer:Object(d.a)(G,L),actions:B},W="CHART.SET_DATA",J="CHART.SET_SIGNAL",M=function e(){Object(i.a)(this,e)};M.setData=Object(l.a)(W),M.setSignal=Object(l.a)(J),M.fetchChartData=function(e){return function(){var t=Object(j.a)(O.a.mark((function t(a){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.getClicks(e);case 3:n=t.sent,a(M.setData(n.data)),setTimeout((function(){a(M.setSignal(!0))}),2e3),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()};var P=(F={},Object(p.a)(F,W,(function(e,t){var a=function(e){var t=Object(K.a)(new Set(e.map((function(e){return e.hash})))),a=[];t.map((function(t){var n=e.filter((function(e){return e.hash===t}));a.push(n)}));var n=[];return a.map((function(e){var t={label:e[0].hash,data:[]};e.reverse().map((function(e,a){t.data.push([a,e.count])})),n.push(t)})),n}(t.payload);return Object(b.a)(Object(b.a)({},e),{},{data:a.reverse()})})),Object(p.a)(F,J,(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{signal:t.payload})})),F),z=Object(d.a)(P,{data:[],signal:!1}),V={actions:M,reducer:z},Y="USERS.SET_USERS",$=function e(){Object(i.a)(this,e)};$.setUsers=Object(l.a)(Y),$.fetchUsers=function(){return function(){var e=Object(j.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.getUsers();case 3:a=e.sent,t($.setUsers(a.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()};var q=Object(p.a)({},Y,(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{users:Object(K.a)(t.payload)})})),Q={reducer:Object(d.a)(q,{users:[]}),actions:$},X=Object(u.combineReducers)({navbar:h.reducer,board:H.reducer,chart:V.reducer,users:Q.reducer}),Z=a(125),ee=Object(Z.composeWithDevTools)(Object(u.applyMiddleware)((function(e){var t=e.dispatch,a=e.getState;return function(e){return function(n){return n instanceof Function?n(t,a):e(n)}}}))),te=Object(u.createStore)(X,ee),ae=a(90),ne=a(8),ce=(a(175),a(126)),re=(a(177),a(40)),se=(a(178),a(54)),oe=a(94),ue=a(315),ie=(a(179),a(1)),le=a.n(ie),me=a(314),fe=(a(180),function(e){var t=e.task,a=Object(o.b)(),n=le()({task:!0}),r=function(){var e=Object(j.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.changeTask(Object(b.a)(Object(b.a)({},t),{},{status:n}));case 3:a(B.fetchTasks()),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:n},c.a.createElement("h3",{className:"task-title"},"\u0422\u0435\u043c\u0430: ",t.title),c.a.createElement("p",{className:"task-description"},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: ",t.description),c.a.createElement("div",{className:"controls"},c.a.createElement(oe.a,{onClick:function(){r(t.status+1)},type:"dashed"},function(){switch(t.status){case 0:return"\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0443";case 1:return"\u0412 \u0442\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435";case 2:return"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"}}()),c.a.createElement(oe.a,{danger:!0,type:"dashed",icon:c.a.createElement(me.a,null),onClick:function(){r(4)}})))}),pe=function(e){var t=e.statusId,a=e.tasks,n=e.onCreateTask,r=A[t],s=a.filter((function(e){return e.status===t}));return c.a.createElement("div",{className:"tasks-list"},c.a.createElement("h3",{className:"tasks-list-title"},r),c.a.createElement("div",{className:"tasks"},c.a.createElement("div",{className:"controls"},c.a.createElement(oe.a,{size:"small",icon:c.a.createElement(ue.a,null),onClick:function(){n&&n(t)}})),s&&s.length?c.a.createElement(c.a.Fragment,null,s.map((function(e,t){return c.a.createElement(fe,{key:t,task:e})}))):c.a.createElement(se.a,{description:'\u041d\u0435\u0442 \u0437\u0430\u0434\u0430\u0447 \u0432 \u0441\u0442\u0430\u0442\u0443\u0441\u0435 "'.concat(r,'"')})))},be=a(308),de=a(311),Ee=a(309),he=(a(215),function(e){var t=Object(n.useState)(!1),a=Object(re.a)(t,2),r=a[0],s=a[1],o=e.status,u=e.onClose,i=be.a.useForm(),l=Object(re.a)(i,1)[0],m=function(){var e=Object(j.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,x.createTask(t);case 4:u&&u(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.prev=10,s(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"backdrop",onClick:function(e){e.stopPropagation(),u&&u()}},c.a.createElement("div",{className:"form-task",onClick:function(e){return e.stopPropagation()}},c.a.createElement(be.a,{form:l,onFinish:function(e){var t=Object(b.a)(Object(b.a)({},e),{},{status:o});t.title.length&&m(t),l.resetFields()}},c.a.createElement(be.a.Item,{name:"title"},c.a.createElement(de.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})),c.a.createElement(be.a.Item,{name:"urgency"},c.a.createElement(Ee.a,{placeholder:"\u0421\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c"},c.a.createElement(Ee.a.Option,{value:0},"\u041d\u0435 \u0441\u0440\u043e\u0447\u043d\u043e"),c.a.createElement(Ee.a.Option,{value:1},"\u0421\u0440\u043e\u0447\u043d\u043e"),c.a.createElement(Ee.a.Option,{value:2},"\u041e\u0447\u0435\u043d\u044c \u0441\u0440\u043e\u0447\u043d\u043e"))),c.a.createElement(be.a.Item,{name:"description"},c.a.createElement(de.a.TextArea,{placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435..."})),c.a.createElement(be.a.Item,null,c.a.createElement(oe.a,{htmlType:"submit",loading:r},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))}),ve=(a(301),a(302),a(142)),Oe=a.n(ve),je=function(e){var t=e.name,a=e.secondName;return c.a.createElement("div",{className:"user"},c.a.createElement("div",{className:"avatar"},c.a.createElement("img",{src:Oe.a,alt:"avatar"})),c.a.createElement("div",{className:"info"},c.a.createElement("h3",null,t),c.a.createElement("h3",null,a)))},ke=(a(303),a(143)),ge=a.n(ke),Te=function(){var e=Object(n.useState)(!1),t=Object(re.a)(e,2),a=t[0],r=t[1],s=Object(o.b)();Object(n.useEffect)((function(){s(f.setTitle("404 \u041f\u0443\u0443\u0443\u0441\u0442\u043e\u043e\u043e..."));var e=setTimeout((function(){r(!0)}),100);return function(){clearTimeout(e)}}),[]);var u=le()({kolyan:!0,"kolyan-show":a});return c.a.createElement("div",{className:"not-found"},c.a.createElement("h1",null,"\u0422\u044b \u043a\u0443\u0434\u0430 \u0441\u0432\u043e\u0438\u043c \u043f\u0430\u043b\u044c\u0446\u0435\u043c \u0442\u044b\u0447\u0435\u0448\u044c?"),c.a.createElement("img",{className:u,src:ge.a,alt:"kolyan"}))},Se=[{path:g,name:"\u0414\u043e\u0441\u043a\u0430 \u0441 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430\u043c\u0438",component:function(){var e=Object(n.useState)(0),t=Object(re.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),u=Object(re.a)(s,2),i=u[0],l=u[1],m=Object(o.b)(),p=Object(o.c)((function(e){return e.board})),b=p.tasks,d=(p.loadStatus,p.signal);Object(n.useEffect)((function(){m(f.setTitle("\u0414\u043e\u0441\u043a\u0430 \u0441 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430\u043c\u0438")),m(B.fetchTasks(!0))}),[]),Object(n.useEffect)((function(){d&&(m(B.fetchTasks()),m(B.setSignalFetch(!1)))}),[d]);var E=function(e){r(e),l(!0)};return c.a.createElement("div",{className:"tasks"},!!b&&c.a.createElement("div",{className:"tasks-columns"},c.a.createElement(pe,{statusId:0,tasks:b,onCreateTask:E}),c.a.createElement(pe,{statusId:1,tasks:b,onCreateTask:E}),c.a.createElement(pe,{statusId:2,tasks:b,onCreateTask:E}),c.a.createElement(pe,{statusId:3,tasks:b,onCreateTask:E})),i&&c.a.createElement(he,{status:a,onClose:function(){l(!1)}}))}},{path:T,name:"\u0413\u0440\u0435\u0431\u0446\u044b",component:function(){var e=Object(o.c)((function(e){return e.users})).users,t=Object(o.b)();Object(n.useEffect)((function(){t(f.setTitle("\u0413\u0440\u0435\u0431\u0446\u044b")),t($.fetchUsers())}),[]);return c.a.createElement("div",{className:"users"},"\xa0",e&&e.length?c.a.createElement("div",{className:"users-list"},e.map((function(e,t){return c.a.createElement(je,{key:t,name:e.first_name,secondName:e.second_name})}))):c.a.createElement("p",null,"\u041f\u043e\u043a\u0430 \u0447\u0442\u043e \u043d\u0435\u0442 \u0433\u0440\u0435\u0431\u0446\u043e\u0432"))}},{path:k,name:"\u0413\u0440\u0430\u0444\u0438\u043a \u0440\u0430\u0431\u043e\u0442\u044b \u0433\u0440\u0435\u0431\u0446\u043e\u0432",component:function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.chart})),a=t.data,r=t.signal;Object(n.useEffect)((function(){e(f.setTitle("\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c \u0433\u0440\u0435\u0431\u043b\u0438")),e(M.fetchChartData(100))}),[]),Object(n.useEffect)((function(){r&&(e(M.fetchChartData(100)),e(M.setSignal(!1)))}),[r]);return c.a.createElement("div",{className:"rating"},!!a.length&&c.a.createElement("div",{className:"chart-holder"},c.a.createElement(ce.Chart,{data:a,axes:[{primary:!0,type:"linear",position:"bottom"},{type:"linear",position:"left"}],tooltip:!0})))}}],Ne=(a(304),function(e){var t=e.route,a=e.active,n=Object(ne.g)(),r=le()({"side-menu-item":!0,"side-menu-item-active":a});return c.a.createElement("div",{className:r,onClick:function(){n.push(t.path)}},c.a.createElement("span",null,t.name))}),ye=function(e){var t=e.routes.filter((function(e){return!!e.name})),a=Object(ne.h)().pathname;return c.a.createElement("div",{className:"side-menu"},t.map((function(e,t){return c.a.createElement(Ne,{key:t,route:e,active:e.path===a})})))},Ae=(a(306),function(){var e=Object(o.c)((function(e){return e.navbar})).title;return c.a.createElement("div",{className:"navbar"},c.a.createElement("h1",null,e))}),Ce=function(){return c.a.createElement(ae.a,null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"container-side"},c.a.createElement(ye,{routes:Se})),c.a.createElement("div",{className:"container-content"},c.a.createElement(Ae,null),c.a.createElement(ne.b,{path:"/"},c.a.createElement(ne.a,{to:g})),c.a.createElement(ne.d,null,Se.map((function(e,t){return c.a.createElement(ne.b,{key:t,path:e.path,component:e.component})})),c.a.createElement(Te,null)))))},we=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(o.a,{store:te},c.a.createElement(Ce,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[148,1,2]]]);
//# sourceMappingURL=main.5dcb5327.chunk.js.map